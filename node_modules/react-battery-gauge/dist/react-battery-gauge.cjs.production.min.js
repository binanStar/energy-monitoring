"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t,e=require("react"),a=(t=e)&&"object"==typeof t&&"default"in t?t.default:t;function i(){return(i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t}).apply(this,arguments)}function r(t,e){if(null==t)return{};var a,i,r={},n=Object.keys(t);for(i=0;i<n.length;i++)e.indexOf(a=n[i])>=0||(r[a]=t[a]);return r}var n="clip_level_meter",o={canvasWidth:100,canvasHeight:52,aspectRatio:.52,padding:0,value:50,maxValue:100,clipPathHash:"",orientation:"horizontal",animated:!1,charging:!1,customization:{batteryBody:{strokeWidth:4,cornerRadius:6,fill:"none",strokeColor:"#111"},batteryCap:{fill:"none",strokeWidth:4,strokeColor:"#111",cornerRadius:2,capToBodyRatio:.4},batteryMeter:{fill:"green",lowBatteryValue:15,lowBatteryFill:"red",outerGap:1,noOfCells:1,interCellsGap:1},readingText:{lightContrastColor:"#111",darkContrastColor:"#fff",lowBatteryColor:"red",fontFamily:"Helvetica",fontSize:14,showPercentage:!0},chargingFlash:{scale:void 0,fill:"orange",animated:!0,animationDuration:1e3}}},l=e.createContext(o);function c(){return e.useContext(l)}var u=function(t){var e=c(),a=e.canvasHeight,i=e.padding,r=(a-2*i)*t,n=r/2;return{bodyWidth:e.canvasWidth-n-2*i,bodyHeight:a-2*i,capWidth:n,capHeight:r}},d=function(){var t=c(),e=t.canvasWidth,i=t.canvasHeight,r=t.padding,n=t.customization,o=t.clipPathHash,l=n.batteryBody,d=l.strokeColor,s=l.strokeWidth,h=l.fill,m=l.cornerRadius,f=n.batteryCap,y=f.strokeColor,v=f.strokeWidth,g=f.fill,p=f.cornerRadius,b=u(f.capToBodyRatio),x=b.bodyWidth,w=b.bodyHeight,C=b.capWidth,E=b.capHeight;return a.createElement("g",null,a.createElement("defs",null,a.createElement("clipPath",{id:"battery_cap_clip"+o},a.createElement("rect",{x:e-r-C,y:(i-E-v)/2,width:C,height:E+v,strokeWidth:v}))),a.createElement("rect",{className:"batteryBody",x:r,y:r,rx:m,ry:m,width:x,height:w,strokeWidth:s,fill:h,stroke:d}),a.createElement("rect",{clipPath:"url(#battery_cap_clip"+o+")",className:"batteryCap",x:e-r-C-p,y:(i-E)/2,rx:p,ry:p,width:C,height:E,strokeWidth:v,fill:g,stroke:y}))},s=function(t){return a.createElement(l.Provider,{value:t.value},t.children)},h=["children","canvasWidth","canvasHeight","padding","value","maxValue","orientation","customization","clipPathHash"],m=function(t){var e=t.children,i=t.canvasWidth,n=t.canvasHeight,o=t.padding,l=t.value,c=t.maxValue,u=t.orientation,d=t.customization,m=t.clipPathHash,f=r(t,h);return a.createElement(s,{value:{canvasWidth:i,canvasHeight:n,padding:o,value:l,maxValue:c,orientation:u,customization:d,clipPathHash:m}},a.createElement("svg",Object.assign({viewBox:"0 0 "+i+" "+n},f),e))},f=function(){var t=c(),a=t.padding,i=t.customization,r=i.batteryBody.strokeWidth,n=i.batteryMeter.outerGap,o=u(i.batteryCap.capToBodyRatio),l=o.bodyWidth,d=o.bodyHeight;return e.useMemo((function(){return{x:a+r/2+n,y:a+r/2+n,width:l-r-2*n,height:d-r-2*n}}),[l,d,n,a,r])};function y(t,e){return t<e}function v(t,e,a){return Math.floor(Math.abs(t/e)*a)}var g=function(){var t=c(),i=t.value,r=t.maxValue,o=t.customization,l=t.clipPathHash,u=f(),d=u.x,s=u.y,h=u.width,m=u.height,g=o.batteryMeter,p=g.fill,b=g.lowBatteryFill,x=g.gradFill,w=g.lowBatteryValue,C=g.outerGap,E=g.noOfCells,z=g.interCellsGap,P=o.batteryBody,B=P.strokeWidth,M=P.cornerRadius,W=e.useMemo((function(){var t=v(i,r,E);return 0===t&&i>0?["cell"]:new Array(t).fill("cell")}),[i,r,E]);return a.createElement("g",null,a.createElement("defs",null,a.createElement("clipPath",{id:n+l},a.createElement("rect",{x:d,y:s,rx:M-B/2-C,ry:M-B/2-C,width:h,height:m})),E<2&&x&&a.createElement("linearGradient",{id:"levelGradient"+l},x.map((function(t){return a.createElement("stop",{key:t.color,offset:t.offset+"%",stopColor:t.color})})))),1===E&&a.createElement("g",null,a.createElement("rect",x?{className:"batteryMeter",clipPath:"url(#clip_level_meter_filled"+l+")",x:d,y:s,width:h,height:m,fill:"url(#levelGradient"+l+")"}:{className:"batteryMeter",clipPath:"url(#"+(n+l)+")",x:d,y:s,width:h*i/r,height:m,fill:y(i,w)?b:p})),a.createElement("g",null,E>1&&W.map((function(t,e){return a.createElement("rect",{key:e,className:"batteryMeter",clipPath:"url(#"+(n+l)+")",x:d+(h+z)/E*e,y:s,width:h/E-z,height:m,fill:y(i,w)?b:p})}))))},p=["fontFamily","darkContrastColor","lightContrastColor","lowBatteryColor","showPercentage","fontSize"],b=function(t){var e=t.formatValue,i=c(),o=i.value,l=i.maxValue,u=i.orientation,d=i.customization,s=i.clipPathHash,h=f(),m=h.x,g=h.y,b=h.width,x=h.height,w=d.readingText,C=w.fontFamily,E=w.darkContrastColor,z=w.lightContrastColor,P=w.lowBatteryColor,B=w.showPercentage,M=w.fontSize,W=r(w,p),k=d.batteryMeter,_=k.lowBatteryValue,H=k.noOfCells,V=k.interCellsGap,F=B?"%":"",O=o/l,R=H>1,G=v(o,l,H),T=H-G,j=b/H,A=function(t,e){return Math.round(t/e*100)}(o,l),S=function(t,i){return a.createElement("text",Object.assign({className:"readingText",x:m+b/2,y:g+x/2,dominantBaseline:"middle",textAnchor:"middle",clipPath:"url(#"+i+")",fill:y(o,_)?P:t,fontFamily:C,fontWeight:"bold",fontSize:M,writingMode:"vertical"===u?"tb":"lr"},W),e(A)+F)};return a.createElement("g",null,a.createElement("defs",null,a.createElement("clipPath",{id:"clip_level_meter_filled"+s},a.createElement("rect",{x:m,y:g,width:R?j*G-V/2:b*O,height:x,clipPath:"url(#"+(n+s)+")"})),a.createElement("clipPath",{id:"clip_level_meter_empty"+s},a.createElement("rect",{x:m+(R?j*G-V/2:b*O),y:g,width:R?j*T:b*(1-O),height:x,clipPath:"url(#"+(n+s)+")"}))),S(E,"clip_level_meter_filled"+s),S(z,"clip_level_meter_empty"+s))},x=function(t){var a=t.value,i=t.duration,r=void 0===i?1e3:i,n=t.startValue,o=t.enabled,l=void 0!==o&&o,c=t.direction,u=void 0===c?"forward":c,d=t.iterationCount,s=void 0===d?1:d,h=e.useState(void 0===n?0:n),m=h[0],f=h[1],y=e.useRef(0),v=e.useCallback((function(){return y.current+=1,new Promise((function(t){var e=0,i=function i(n){e||(e=n);var o,l=function(t,e){return t}(Math.min((n-e)/r,"both"===u?2:1)),c="reverse"===(o=u)?(1-l)*(a-m)+m:l>1&&"both"===o?(2-l)*(a-m)+m:l*(a-m)+m;f(Math.floor(c)),l<1||"both"===u&&l<2?window.requestAnimationFrame(i):(window.cancelAnimationFrame(window.requestAnimationFrame(i)),t(!0))};y.current>1?setTimeout((function(){window.requestAnimationFrame(i)}),r/5):window.requestAnimationFrame(i)}))}),[a]);return e.useEffect((function(){if(l){var t=v();!function e(){t.then((function(){return"infinite"===s||y.current<s?(t=v(),void e()):void 0}))}()}}),[l,s,a]),l?m:a},w=["scale"];function C(t){var e=t.scale,i=r(t,w),n=c(),o=n.canvasWidth,l=n.canvasHeight,u=n.orientation,d=n.customization,s=d.batteryBody.strokeWidth,h=d.chargingFlash,m=h.fill,y=x({value:100,enabled:h.animated,direction:"both",iterationCount:"infinite",duration:h.animationDuration,startValue:20}),v=f(),g=e?"scale("+e+")":"";return a.createElement("g",{transform:"vertical"===u?"rotate(-90)"+g:g,style:{transformOrigin:o/2-s+"px "+(l/2-s/2)+"px"},opacity:y/100},a.createElement("path",Object.assign({d:"M"+(v.width/2+8.4)+","+(l/2-14.35)+"l-13,16.8l7.4,0l-1.8,11.9l11.2,-16.8l-7.4,0l3.6,-11.9z",fill:m},i)))}var E=["size","aspectRatio","children","padding","value","maxValue","customization","orientation","animated","charging","formatValue"],z=function(t){var n,l,c,u,s,h=t.size,f=void 0===h?300:h,y=t.aspectRatio,v=void 0===y?o.aspectRatio:y,p=t.children,w=t.padding,z=void 0===w?o.padding:w,P=t.value,B=void 0===P?o.value:P,M=t.maxValue,W=void 0===M?o.maxValue:M,k=t.customization,_=void 0===k?o.customization:k,H=t.orientation,V=void 0===H?o.orientation:H,F=t.animated,O=void 0===F?o.animated:F,R=t.charging,G=void 0===R?o.charging:R,T=t.formatValue,j=void 0===T?function(t){return t}:T,A=r(t,E),S=Math.round(100*v),N=Math.round(f*v),q=(u=(c=e.useState(""))[0],s=c[1],e.useEffect((function(){s((Math.random()+1).toString(36).substring(7))}),[]),u),D=G?{lowBatteryFill:(null==(n=_.batteryMeter)?void 0:n.fill)||o.customization.batteryMeter.fill}:{},I=((l={}).batteryBody=i({},o.customization.batteryBody,_.batteryBody),l.batteryCap=i({},o.customization.batteryCap,_.batteryCap),l.batteryMeter=i({},o.customization.batteryMeter,_.batteryMeter,D),l.readingText=i({},o.customization.readingText,_.readingText),l.chargingFlash=i({},o.customization.chargingFlash,_.chargingFlash),l),J=I.batteryBody.strokeWidth/2+z,K=x({value:B,enabled:O}),L=x({startValue:1,value:W,enabled:G,iterationCount:"infinite",duration:2e3});return a.createElement(m,Object.assign({width:f,height:"vertical"===V?f:N,canvasWidth:100,canvasHeight:S,padding:J,value:G?L:K,maxValue:W||1,orientation:V,customization:I,clipPathHash:q},A),a.createElement("g",{transform:"vertical"===V?"rotate(-90,50,"+S/2+")":""},a.createElement(d,null),a.createElement(g,null),G?a.createElement(C,null):a.createElement(b,{formatValue:j}),p))};exports.BatteryGauge=z,exports.default=z;
//# sourceMappingURL=react-battery-gauge.cjs.production.min.js.map
